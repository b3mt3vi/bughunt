services:
  subfinder:
    image: projectdiscovery/subfinder
    command: -T -silent -d ${DOMAIN} -o /app/data/${DOMAIN_DIR}/subfinder_output.txt
    environment:
      - CENSYS_API_ID=${CENSYS_API_ID}
      - CENSYS_API_SECRET=${CENSYS_API_SECRET}
      - SHODAN_API_KEY=${SHODAN_API_KEY}
      - VIRUSTOTAL_API_KEY=${VIRUSTOTAL_API_KEY}
      - FULLHUNT_API_KEY=${FULLHUNT_API_KEY}
    volumes:
      - ./data:/app/data
    networks:
      - shared_network

  httpx:
    image: projectdiscovery/httpx
    command: -T -silent -l /app/data/${DOMAIN_DIR}/final_subdomains.txt -o /app/data/${DOMAIN_DIR}/live_hosts.txt
    volumes:
      - ./data:/app/data
    networks:
      - shared_network

  gau:
    image: sxcurity/gau
    command: -T ${DOMAIN} --subs --threads 5 --providers wayback,commoncrawl,otx,urlscan --o /app/data/${DOMAIN_DIR}/urls.txt
    volumes:
      - ./data:/app/data
    networks:
      - shared_network

  arjun:
    image: s0md3v/arjun
    command: -T -i /app/data/${DOMAIN_DIR}/urls.txt -o /app/data/${DOMAIN_DIR}/arjun_output.txt
    volumes:
      - ./data:/app/data
    networks:
      - shared_network

  dalfox:
    image: hahwul/dalfox
    command: -T file /app/data/${DOMAIN_DIR}/recon/urls/urls.txt --silence --no-spinner -o /app/data/${DOMAIN_DIR}/dalfox_output.txt
    volumes:
      - ./data:/app/data
    networks:
      - shared_network

  paramspider:
    image: devanshbatham/paramspider
    command: -T -d ${DOMAIN} -s > /app/data/${DOMAIN_DIR}/params.txt
    volumes:
      - ./data:/app/data
    networks:
      - shared_network

  nuclei:
    image: projectdiscovery/nuclei
    command: -T -silent -l /app/data/${DOMAIN_DIR}/live_hosts.txt -t /root/nuclei-templates -o /app/data/${DOMAIN_DIR}/nuclei_output.txt -rl 50 -c 25
    volumes:
      - ./data:/app/data
      - ./config/nuclei:/root/nuclei-templates
    networks:
      - shared_network

networks:
  shared_network:
    driver: bridge

